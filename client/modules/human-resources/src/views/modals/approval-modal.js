"use strict";var t=(s,a,e)=>new Promise((l,i)=>{var c=o=>{try{n(e.next(o))}catch(r){i(r)}},p=o=>{try{n(e.throw(o))}catch(r){i(r)}},n=o=>o.done?l(o.value):Promise.resolve(o.value).then(c,p);n((e=e.apply(s,a)).next())});define("human-resources:views/modals/approval-modal",["views/modal","model"],function(s,a){return s.extend({className:"dialog dialog-record",templateContent:`
            <div class="record no-side-margin">{{{record}}}</div>
        `,backdrop:!0,setup:function(){this.buttonList=[{name:"approve",labelTranslation:"VacationRequestApproval.labels.Approve",style:"success"},{name:"reject",labelTranslation:"VacationRequestApproval.labels.Reject",style:"danger"},{name:"returnForCompletion",labelTranslation:"VacationRequestApproval.labels.Return for completion",style:"warning"},{name:"cancel",label:"Cancel"}],this.headerText=this.translate("Approval process","labels","VacationRequestApproval"),this.formModel=new a,this.formModel.name="Approval",this.formModel.setDefs({fields:{description:{type:"text"}}}),this.createView("record","views/record/edit-for-modal",{scope:"None",model:this.formModel,selector:".record",detailLayout:[{rows:[[{name:"description"}]]}]})},actionApprove:function(){return t(this,null,function*(){this.process("Approved")})},actionReject:function(){return t(this,null,function*(){this.process("Rejected")})},actionReturnForCompletion:function(){return t(this,null,function*(){this.process("Returned")})},process:function(e){Espo.Ajax.postRequest(`HumanResources/Handle/${this.options.entityType}/${this.options.id}`,{status:e,note:this.formModel.get("description")}),this.trigger("done",e),this.close()}})});
