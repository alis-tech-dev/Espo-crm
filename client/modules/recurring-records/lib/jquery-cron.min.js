!function($){const defaults={initial:"* * * * *",minuteOpts:{minWidth:100,itemWidth:30,columns:4,rows:void 0,title:"Minutes Past the Hour"},timeHourOpts:{minWidth:100,itemWidth:20,columns:2,rows:void 0,title:"Time: Hour"},domOpts:{minWidth:100,itemWidth:30,columns:void 0,rows:10,title:"Day of Month"},monthOpts:{minWidth:100,itemWidth:100,columns:2,rows:void 0,title:void 0},dowOpts:{minWidth:100,itemWidth:void 0,columns:void 0,rows:void 0,title:void 0},timeMinuteOpts:{minWidth:100,itemWidth:20,columns:4,rows:void 0,title:"Time: Minute"},effectOpts:{openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:!0},url_set:void 0,customValues:void 0,onChange:void 0,useGentleSelect:!1,labels:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],periods:["minute","hour","day","week","month","year"],unsupported:"Unsupported cron expression. Please continue editing the expression in Advanced mode.",Weekends:"Weekends",Weekdays:"Weekdays",Every:"Every","on the":"on the",of:"of","minutes past the hour":"minutes past the hour",at:"at",st:"st",nd:"nd",rd:"rd",th:"th"}};let str_opt_mih="";for(let i=0;i<60;i++){var j=i<10?"0":"";str_opt_mih+="<option value='"+i+"'>"+j+i+"</option>\n"}let str_opt_hid="";for(let i=0;i<24;i++){let j=i<10?"0":"";str_opt_hid+="<option value='"+i+"'>"+j+i+"</option>\n"}let toDisplay={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},combinations={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}(\d|\*|(\d+(\/|-)\d)|(\d,)+\d)$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/};function getCronType(cron_str,opts){if(void 0!==opts.customValues)for(var key in opts.customValues)if(cron_str===opts.customValues[key])return key;if("string"==typeof cron_str&&/^((\d{1,2}|\*)\s){4}(\d|\*|(\d+(\/|-)\d)|(\d,)+\d)$/.test(cron_str)){var t,d=cron_str.split(" "),minval=[0,0,1,1,0],maxval=[59,23,31,12,6];for(let i=0;i<d.length;i++)if("*"!=d[i]){var v=parseInt(d[i]);if(!(void 0!==v&&v<=maxval[i]&&v>=minval[i]))return void $.error("cron: invalid value found (col "+(i+1)+") in "+o.initial)}for(t in combinations)if(combinations[t].test(cron_str))return t}}let methods={init:function(opts){var opts=opts||{},o=$.extend([],defaults,opts),eo=$.extend({},defaults.effectOpts,opts.effectOpts);if($.extend(o,{minuteOpts:$.extend({},defaults.minuteOpts,eo,opts.minuteOpts),domOpts:$.extend({},defaults.domOpts,eo,opts.domOpts),monthOpts:$.extend({},defaults.monthOpts,eo,opts.monthOpts),dowOpts:$.extend({},defaults.dowOpts,eo,opts.dowOpts),timeHourOpts:$.extend({},defaults.timeHourOpts,eo,opts.timeHourOpts),timeMinuteOpts:$.extend({},defaults.timeMinuteOpts,eo,opts.timeMinuteOpts)}),function(o){if(void 0===getCronType(o.initial,o))return 1;if(void 0!==(obj=o.customValues)&&"object"!=typeof obj)return 1;var obj;if(void 0!==o.customValues)for(key in o.customValues)if(combinations.hasOwnProperty(key))return $.error("cron: reserved keyword '"+key+"' should not be used as customValues key."),1}(o))return this.text(o.labels.unsupported),this;let str_opt_month="";var label_months=o.labels.months;for(let i=0;i<label_months.length;i++)str_opt_month+="<option value='"+(i+1)+"'>"+label_months[i]+"</option>\n";let str_opt_dow="";var label_days=o.labels.days;for(let i=0;i<label_days.length;i++)str_opt_dow+="<option value='"+i+"'>"+label_days[i]+"</option>\n";str_opt_dow=(str_opt_dow+="<option value='1-5'>"+o.labels.Weekdays+"</option>\n")+"<option value='0,6'>"+o.labels.Weekends+"</option>\n";let str_opt_period="";var label_periods=o.labels.periods;for(let i=0;i<label_periods.length;i++)str_opt_period+="<option value='"+defaults.labels.periods[i]+"'>"+label_periods[i]+"</option>\n";let str_opt_dom="",suffix;for(let i=1;i<32;i++)suffix=1==i||21==i||31==i?o.labels.st:2==i||22==i?o.labels.nd:3==i||23==i?o.labels.rd:o.labels.th,str_opt_dom+="<option value='"+i+"'>"+i+suffix+"</option>\n";let block=[],custom_periods="",cv=o.customValues;if(void 0!==cv)for(let key in cv)custom_periods+="<option value='"+cv[key]+"'>"+key+"</option>\n";block.period=$("<span class='cron-period'>"+o.labels.Every+" <select name='cron-period' class='form-control cron-expression-select'>"+custom_periods+str_opt_period+"</select> </span>").appendTo(this).data("root",this);let select=block.period.find("select");return select.bind("change.cron",event_handlers.periodChanged).data("root",this),o.useGentleSelect&&select.gentleSelect(eo),block.dom=$("<span class='cron-block cron-block-dom'> "+o.labels["on the"]+" <select name='cron-dom' class='form-control cron-expression-select'>"+str_opt_dom+"</select> </span>").appendTo(this).data("root",this),select=block.dom.find("select").data("root",this),o.useGentleSelect&&select.gentleSelect(o.domOpts),block.month=$("<span class='cron-block cron-block-month'> "+o.labels.of+" <select name='cron-month' class='form-control cron-expression-select'>"+str_opt_month+"</select> </span>").appendTo(this).data("root",this),select=block.month.find("select").data("root",this),o.useGentleSelect&&select.gentleSelect(o.monthOpts),block.mins=$("<span class='cron-block cron-block-mins'> "+o.labels.at+" <select name='cron-mins' class='form-control cron-expression-select'>"+str_opt_mih+"</select> "+o.labels["minutes past the hour"]+" </span>").appendTo(this).data("root",this),select=block.mins.find("select").data("root",this),o.useGentleSelect&&select.gentleSelect(o.minuteOpts),block.dow=$("<span class='cron-block cron-block-dow'> on <select name='cron-dow' class='form-control cron-expression-select'>"+str_opt_dow+"</select> </span>").appendTo(this).data("root",this),select=block.dow.find("select").data("root",this),o.useGentleSelect&&select.gentleSelect(o.dowOpts),block.time=$("<span class='cron-block cron-block-time'> "+o.labels.at+" <select name='cron-time-hour' class='cron-time-hour form-control cron-expression-select'>"+str_opt_hid+"</select>:<select name='cron-time-min' class='cron-time-min form-control cron-expression-select'>"+str_opt_mih+" </span>").appendTo(this).data("root",this),select=block.time.find("select.cron-time-hour").data("root",this),o.useGentleSelect&&select.gentleSelect(o.timeHourOpts),select=block.time.find("select.cron-time-min").data("root",this),o.useGentleSelect&&select.gentleSelect(o.timeMinuteOpts),block.controls=$("<span class='cron-controls'>&laquo; save <span class='cron-button cron-button-save'></span> </span>").appendTo(this).data("root",this).find("span.cron-button-save").bind("click.cron",event_handlers.saveClicked).data("root",this).end(),this.find("select").bind("change.cron-callback",event_handlers.somethingChanged),this.data("options",o).data("block",block),this.data("current_value",o.initial),methods.value.call(this,o.initial)},value:function(cron_str){if(cron_str){let o=this.data("options"),block=this.data("block");var useGentleSelect=o.useGentleSelect;let t=getCronType(cron_str,o);if(void 0===t)return!1;if(void 0!==o.customValues&&o.customValues.hasOwnProperty(t))t=o.customValues[t];else{var cron_str=cron_str.split(" "),v={mins:cron_str[0],hour:cron_str[1],dom:cron_str[2],month:cron_str[3],dow:cron_str[4]},targets=toDisplay[t];for(let i=0;i<targets.length;i++){var tgt=targets[i];if("time"==tgt){let btgt=block[tgt].find("select.cron-time-hour").val(v.hour);useGentleSelect&&btgt.gentleSelect("update"),btgt=block[tgt].find("select.cron-time-min").val(v.mins),useGentleSelect&&btgt.gentleSelect("update")}else{let btgt=block[tgt].find("select").val(v[tgt]);useGentleSelect&&btgt.gentleSelect("update")}}}let bp=block.period.find("select").val(t);return useGentleSelect&&bp.gentleSelect("update"),bp.trigger("change"),this}{cron_str=this;let b=cron_str.data("block"),min,hour,day,month,dow;min=hour=day=month=dow="*";var selectedPeriod=b.period.find("select").val();switch(selectedPeriod){case"minute":break;case"hour":min=b.mins.find("select").val();break;case"day":min=b.time.find("select.cron-time-min").val(),hour=b.time.find("select.cron-time-hour").val();break;case"week":min=b.time.find("select.cron-time-min").val(),hour=b.time.find("select.cron-time-hour").val(),dow=b.dow.find("select").val();break;case"month":min=b.time.find("select.cron-time-min").val(),hour=b.time.find("select.cron-time-hour").val(),day=b.dom.find("select").val();break;case"year":min=b.time.find("select.cron-time-min").val(),hour=b.time.find("select.cron-time-hour").val(),day=b.dom.find("select").val(),month=b.month.find("select").val();break;default:return selectedPeriod}return[min,hour,day,month,dow].join(" ")}}},event_handlers={periodChanged:function(){let root=$(this).data("root"),block=root.data("block");root.data("options");var period=$(this).val();if(root.find("span.cron-block").hide(),toDisplay.hasOwnProperty(period)){var b=toDisplay[$(this).val()];for(let i=0;i<b.length;i++)block[b[i]].show()}},somethingChanged:function(){void 0!==(root=$(this).data("root")).data("options").url_set?methods.value.call(root)!=root.data("current_value")?(root.addClass("cron-changed"),root.data("block").controls.fadeIn()):(root.removeClass("cron-changed"),root.data("block").controls.fadeOut()):root.data("block").controls.hide();let oc=root.data("options").onChange;void 0!==oc&&$.isFunction(oc)&&oc.call(root)},saveClicked:function(){let btn=$(this),root=btn.data("root"),cron_str=methods.value.call(root);btn.hasClass("cron-loading")||(btn.addClass("cron-loading"),$.ajax({type:"POST",url:root.data("options").url_set,data:{cron:cron_str},success:function(){root.data("current_value",cron_str),btn.removeClass("cron-loading"),cron_str==methods.value.call(root)&&(root.removeClass("cron-changed"),root.data("block").controls.fadeOut())},error:function(){alert("An error occured when submitting your request. Try again?"),btn.removeClass("cron-loading")}}))}};$.fn.cron=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.cron"):methods.init.apply(this,arguments)},window.cronLabelsLocalisation=defaults.labels}(jQuery);
//# sourceMappingURL=jquery-cron.min.js.map